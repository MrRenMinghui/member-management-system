<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç”¨æˆ·ä¼šå‘˜ç®¡ç† - ä¼šå‘˜å•†åŸç®¡ç†ç³»ç»Ÿ</title>
    <link rel="stylesheet" href="../css/styles.css">
</head>
<body>
    <div class="container">
        <aside class="sider">
            <div class="logo">
                <h1>ä¼šå‘˜å•†åŸç®¡ç†</h1>
            </div>
            <nav class="menu">
                <div class="menu-item active" onclick="navigateTo('user-management')">
                    <span>ğŸ‘¥</span>
                    <span>ç”¨æˆ·ä¼šå‘˜ç®¡ç†</span>
                </div>
                <div class="menu-item" onclick="navigateTo('data-stats')">
                    <span>ğŸ“Š</span>
                    <span>ä¸šåŠ¡æ•°æ®ç»Ÿè®¡</span>
                </div>
                <div class="menu-item" onclick="navigateTo('channel-user-management')">
                    <span>ğŸŒ</span>
                    <span>æ¸ é“ä¼šå‘˜ç®¡ç†</span>
                </div>
            </nav>
        </aside>

        <main class="main">
            <header class="header">
                <div class="header-left">
                    <div class="breadcrumb">ç”¨æˆ·ä¼šå‘˜ç®¡ç†</div>
                </div>
                <div class="user-info">
                    <div class="user-avatar">AD</div>
                    <span>ç®¡ç†å‘˜</span>
                </div>
            </header>

            <div class="content">
                <div class="stats-section" id="stats-section">
                    <div class="stats-loading" id="stats-loading">
                        <div style="display: flex; align-items: center; justify-content: center; height: 120px;">
                            <div style="width: 24px; height: 24px; border: 3px solid #f3f3f3; border-top: 3px solid #1890ff; border-radius: 50%; animation: spin 1s linear infinite;"></div>
                            <span style="margin-left: 12px; color: #666;">åŠ è½½ä¸­...</span>
                        </div>
                    </div>
                    <div class="stats-grid" id="stats-grid" style="display: none;">
                        <div class="stat-card">
                            <div class="stat-label">å½“å‰æ€»æƒç›Šä¼šå‘˜æ•°</div>
                            <div class="stat-value" id="total-members">1,256</div>
                            <div class="stat-change" id="total-members-change">
                                <span class="change-arrow" id="total-members-arrow">â†‘</span>
                                <span class="change-percent" id="total-members-percent">12.5%</span>
                                <span class="change-value" id="total-members-value">+142</span>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-label">ä»Šæ—¥å·²ç­¾ç½²ä¼šå‘˜æ•°</div>
                            <div class="stat-value" id="today-signed">23</div>
                            <div class="stat-change" id="today-signed-change">
                                <span class="change-arrow" id="today-signed-arrow">â†‘</span>
                                <span class="change-percent" id="today-signed-percent">8.2%</span>
                                <span class="change-value" id="today-signed-value">+2</span>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-label">ä»Šæ—¥å·²æ‰£è´¹ä¼šå‘˜æ•°</div>
                            <div class="stat-value" id="today-deducted">45</div>
                            <div class="stat-change" id="today-deducted-change">
                                <span class="change-arrow" id="today-deducted-arrow">â†“</span>
                                <span class="change-percent" id="today-deducted-percent">5.3%</span>
                                <span class="change-value" id="today-deducted-value">-3</span>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-label">ä»Šæ—¥å·²æ‰£æ¬¾é‡‘é¢</div>
                            <div class="stat-value" id="today-amount">Â¥12,560</div>
                            <div class="stat-change" id="today-amount-change">
                                <span class="change-arrow" id="today-amount-arrow">â†‘</span>
                                <span class="change-percent" id="today-amount-percent">15.3%</span>
                                <span class="change-value" id="today-amount-value">+Â¥1,680</span>
                            </div>
                        </div>
                    </div>
                    <div class="stats-error" id="stats-error" style="display: none;">
                        <div style="display: flex; align-items: center; justify-content: center; height: 120px; color: #ff4d4f;">
                            <span>æ•°æ®åŠ è½½å¤±è´¥ï¼Œè¯·åˆ·æ–°é¡µé¢é‡è¯•</span>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">ä¼šå‘˜åˆ—è¡¨</h3>
                    </div>
                    <div class="card-body">
                        <div class="filter-section" style="margin-bottom: 24px; padding: 16px; background-color: #fafafa; border-radius: 4px;">
                            <div class="filter-row" style="display: grid; grid-template-columns: repeat(6, 1fr); gap: 16px; margin-bottom: 16px;">
                                <style>
                                    @media (max-width: 1200px) {
                                        .filter-row {
                                            grid-template-columns: repeat(3, 1fr) !important;
                                        }
                                    }
                                    @media (max-width: 768px) {
                                        .filter-row {
                                            grid-template-columns: repeat(2, 1fr) !important;
                                        }
                                    }
                                    @media (max-width: 480px) {
                                        .filter-row {
                                            grid-template-columns: 1fr !important;
                                        }
                                    }
                                </style>
                                <div>
                                    <label style="font-size: 14px; color: #666; margin-bottom: 8px; display: block;">æœç´¢</label>
                                    <input type="text" class="input" id="filter-search" placeholder="è¯·è¾“å…¥å§“åã€èº«ä»½è¯å·æˆ–æ‰‹æœºå·" oninput="applyFilter()">
                                </div>
                                <div>
                                    <label style="font-size: 14px; color: #666; margin-bottom: 8px; display: block;">æ¸ é“</label>
                                    <select class="input" id="filter-channel" onchange="applyFilter()">
                                        <option value="">å…¨éƒ¨æ¸ é“</option>
                                        <option value="æ¸ é“A">æ¸ é“A</option>
                                        <option value="æ¸ é“B">æ¸ é“B</option>
                                        <option value="æ¸ é“C">æ¸ é“C</option>
                                    </select>
                                </div>
                                <div>
                                    <label style="font-size: 14px; color: #666; margin-bottom: 8px; display: block;">çŠ¶æ€</label>
                                    <select class="input" id="filter-status" onchange="applyFilter()">
                                        <option value="">å…¨éƒ¨çŠ¶æ€</option>
                                        <option value="ä½¿ç”¨ä¸­">ä½¿ç”¨ä¸­</option>
                                        <option value="å·²è¿‡æœŸ">å·²è¿‡æœŸ</option>
                                    </select>
                                </div>
                                <div>
                                    <label style="font-size: 14px; color: #666; margin-bottom: 8px; display: block;">è‡ªåŠ¨æ‰£æ¬¾çŠ¶æ€</label>
                                    <select class="input" id="filter-auto-deduct" onchange="applyFilter()">
                                        <option value="">å…¨éƒ¨çŠ¶æ€</option>
                                        <option value="å·²å¯ç”¨">å·²å¯ç”¨</option>
                                        <option value="å·²ç¦ç”¨">å·²ç¦ç”¨</option>
                                    </select>
                                </div>
                            </div>
                            <div class="filter-actions" style="display: flex; gap: 12px;">
                                <button class="btn btn-primary" onclick="applyFilter()">ç­›é€‰</button>
                                <button class="btn btn-default" onclick="resetFilter()">é‡ç½®</button>
                            </div>
                        </div>
                    <div class="card-body">
                        <table class="table">
                            <thead>
                                <tr>
                                    <th>ç”¨æˆ·ID</th>
                                    <th>å§“å</th>
                                    <th>æ‰‹æœºå·</th>
                                    <th>æ¸ é“</th>
                                    <th>çŠ¶æ€</th>
                                    <th>å·²æ‰£æ¬¾ä¼šå‘˜é‡‘é¢</th>
                                    <th>ä¼šå‘˜æ”¯ä»˜æ¬¡æ•°</th>
                                    <th>æœ€è¿‘æ¶ˆè´¹æ—¶é—´</th>
                                    <th>ä¿¡ç”¨é¢åº¦</th>
                                    <th>è‡ªåŠ¨æ‰£æ¬¾çŠ¶æ€</th>
                                    <th>å¤‡æ³¨</th>
                                    <th>æ“ä½œ</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>10001</td>
                                    <td>å¼ ä¸‰</td>
                                    <td>138****1234</td>
                                    <td><span class="tag tag-success">æ¸ é“A</span></td>
                                    <td><span class="tag tag-success">ä½¿ç”¨ä¸­</span></td>
                                    <td>Â¥1,200</td>
                                    <td>6</td>
                                    <td>2024-01-15</td>
                                    <td>Â¥5,000</td>
                                    <td><span class="tag tag-success">å·²å¯ç”¨</span></td>
                                    <td>
                                        <div class="remark-content" id="remark-10001">VIPç”¨æˆ·ï¼Œæ´»è·ƒåº¦é«˜</div>
                                        <div class="remark-edit" style="display: none;">
                                            <input type="text" class="input" id="remark-input-10001" value="VIPç”¨æˆ·ï¼Œæ´»è·ƒåº¦é«˜" />
                                            <button class="btn btn-primary" onclick="saveRemark(10001)">ä¿å­˜</button>
                                            <button class="btn btn-default" onclick="cancelRemark(10001)">å–æ¶ˆ</button>
                                        </div>
                                    </td>
                                    <td>
                                        <button class="btn btn-text" style="color: #1890ff;" onclick="showUserDetail(10001)">è¯¦æƒ…</button>
                                        <button class="btn btn-text" style="color: #1890ff;" onclick="editRemark(10001)">ç¼–è¾‘å¤‡æ³¨</button>
                                    </td>
                                </tr>
                                <tr>
                                    <td>10002</td>
                                    <td>æå››</td>
                                    <td>139****5678</td>
                                    <td><span class="tag tag-success">æ¸ é“B</span></td>
                                    <td><span class="tag tag-error">å·²è¿‡æœŸ</span></td>
                                    <td>Â¥800</td>
                                    <td>4</td>
                                    <td>2024-01-14</td>
                                    <td>Â¥3,000</td>
                                    <td><span class="tag tag-error">å·²ç¦ç”¨</span></td>
                                    <td>
                                        <div class="remark-content" id="remark-10002">æ™®é€šç”¨æˆ·</div>
                                        <div class="remark-edit" style="display: none;">
                                            <input type="text" class="input" id="remark-input-10002" value="æ™®é€šç”¨æˆ·" />
                                            <button class="btn btn-primary" onclick="saveRemark(10002)">ä¿å­˜</button>
                                            <button class="btn btn-default" onclick="cancelRemark(10002)">å–æ¶ˆ</button>
                                        </div>
                                    </td>
                                    <td>
                                        <button class="btn btn-text" style="color: #1890ff;" onclick="showUserDetail(10002)">è¯¦æƒ…</button>
                                        <button class="btn btn-text" style="color: #1890ff;" onclick="editRemark(10002)">ç¼–è¾‘å¤‡æ³¨</button>
                                    </td>
                                </tr>
                                <tr>
                                    <td>10003</td>
                                    <td>ç‹äº”</td>
                                    <td>137****9012</td>
                                    <td><span class="tag tag-processing">æ¸ é“C</span></td>
                                    <td><span class="tag tag-success">ä½¿ç”¨ä¸­</span></td>
                                    <td>Â¥2,000</td>
                                    <td>10</td>
                                    <td>2024-01-13</td>
                                    <td>Â¥8,000</td>
                                    <td><span class="tag tag-success">å·²å¯ç”¨</span></td>
                                    <td>
                                        <div class="remark-content" id="remark-10003">ä¼˜è´¨å®¢æˆ·ï¼Œæ¨èå‡çº§</div>
                                        <div class="remark-edit" style="display: none;">
                                            <input type="text" class="input" id="remark-input-10003" value="ä¼˜è´¨å®¢æˆ·ï¼Œæ¨èå‡çº§" />
                                            <button class="btn btn-primary" onclick="saveRemark(10003)">ä¿å­˜</button>
                                            <button class="btn btn-default" onclick="cancelRemark(10003)">å–æ¶ˆ</button>
                                        </div>
                                    </td>
                                    <td>
                                        <button class="btn btn-text" style="color: #1890ff;" onclick="showUserDetail(10003)">è¯¦æƒ…</button>
                                        <button class="btn btn-text" style="color: #1890ff;" onclick="editRemark(10003)">ç¼–è¾‘å¤‡æ³¨</button>
                                    </td>
                                </tr>
                                <tr>
                                    <td>10004</td>
                                    <td>èµµå…­</td>
                                    <td>136****3456</td>
                                    <td><span class="tag tag-processing">æ¸ é“C</span></td>
                                    <td><span class="tag tag-error">å·²è¿‡æœŸ</span></td>
                                    <td>Â¥600</td>
                                    <td>2</td>
                                    <td>2023-11-12</td>
                                    <td>Â¥2,000</td>
                                    <td><span class="tag tag-error">å·²ç¦ç”¨</span></td>
                                    <td>
                                        <div class="remark-content" id="remark-10004">æ™®é€šç”¨æˆ·ï¼Œæ´»è·ƒåº¦ä¸€èˆ¬</div>
                                        <div class="remark-edit" style="display: none;">
                                            <input type="text" class="input" id="remark-input-10004" value="æ™®é€šç”¨æˆ·ï¼Œæ´»è·ƒåº¦ä¸€èˆ¬" />
                                            <button class="btn btn-primary" onclick="saveRemark(10004)">ä¿å­˜</button>
                                            <button class="btn btn-default" onclick="cancelRemark(10004)">å–æ¶ˆ</button>
                                        </div>
                                    </td>
                                    <td>
                                        <button class="btn btn-text" style="color: #1890ff;" onclick="showUserDetail(10004)">è¯¦æƒ…</button>
                                        <button class="btn btn-text" style="color: #1890ff;" onclick="editRemark(10004)">ç¼–è¾‘å¤‡æ³¨</button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>

                        <div class="pagination">
                            <div class="pagination-item">â€¹</div>
                            <div class="pagination-item active">1</div>
                            <div class="pagination-item">2</div>
                            <div class="pagination-item">3</div>
                            <div class="pagination-item">â€º</div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script src="../js/script.js"></script>
    <script>
        // ä¼šå‘˜æ•°æ®
        const membersData = [
            { id: 10001, name: 'å¼ ä¸‰', phone: '138****1234', channel: 'æ¸ é“A', status: 'ä½¿ç”¨ä¸­', deductionAmount: 'Â¥1,200', paymentCount: 6, lastConsume: '2024-01-15', credit: 'Â¥5,000', autoDeduct: 'å·²å¯ç”¨', remark: 'VIPç”¨æˆ·ï¼Œæ´»è·ƒåº¦é«˜', idcard: '110101********1234' },
            { id: 10002, name: 'æå››', phone: '139****5678', channel: 'æ¸ é“B', status: 'å·²è¿‡æœŸ', deductionAmount: 'Â¥800', paymentCount: 4, lastConsume: '2024-01-14', credit: 'Â¥3,000', autoDeduct: 'å·²ç¦ç”¨', remark: 'æ™®é€šç”¨æˆ·', idcard: '110102********5678' },
            { id: 10003, name: 'ç‹äº”', phone: '137****9012', channel: 'æ¸ é“C', status: 'ä½¿ç”¨ä¸­', deductionAmount: 'Â¥2,000', paymentCount: 10, lastConsume: '2024-01-13', credit: 'Â¥8,000', autoDeduct: 'å·²å¯ç”¨', remark: 'ä¼˜è´¨å®¢æˆ·ï¼Œæ¨èå‡çº§', idcard: '110103********9012' },
            { id: 10004, name: 'èµµå…­', phone: '136****3456', channel: 'æ¸ é“C', status: 'å·²è¿‡æœŸ', deductionAmount: 'Â¥600', paymentCount: 2, lastConsume: '2023-11-12', credit: 'Â¥2,000', autoDeduct: 'å·²ç¦ç”¨', remark: 'æ™®é€šç”¨æˆ·ï¼Œæ´»è·ƒåº¦ä¸€èˆ¬', idcard: '110104********3456' }
        ];

        // åº”ç”¨ç­›é€‰
        function applyFilter() {
            const search = document.getElementById('filter-search').value.toLowerCase();
            const channel = document.getElementById('filter-channel').value;
            const status = document.getElementById('filter-status').value;
            const autoDeduct = document.getElementById('filter-auto-deduct').value;

            const rows = document.querySelectorAll('table tbody tr');
            let visibleCount = 0;

            rows.forEach((row, index) => {
                const member = membersData[index];
                if (!member) return;

                const matchSearch = !search || 
                    member.name.toLowerCase().includes(search) || 
                    member.idcard.toLowerCase().includes(search) || 
                    member.phone.toLowerCase().includes(search);
                const matchChannel = !channel || member.channel === channel;
                const matchStatus = !status || member.status === status;
                const matchAutoDeduct = !autoDeduct || member.autoDeduct === autoDeduct;

                if (matchSearch && matchChannel && matchStatus && matchAutoDeduct) {
                    row.style.display = '';
                    visibleCount++;
                } else {
                    row.style.display = 'none';
                }
            });

            // æ›´æ–°åˆ†é¡µä¿¡æ¯
            const pagination = document.querySelector('.pagination');
            if (pagination) {
                if (visibleCount === 0) {
                    pagination.innerHTML = '<div style="padding: 24px; text-align: center; color: #999;">æš‚æ— ç¬¦åˆæ¡ä»¶çš„ä¼šå‘˜</div>';
                }
            }
        }

        // é‡ç½®ç­›é€‰
        function resetFilter() {
            document.getElementById('filter-search').value = '';
            document.getElementById('filter-channel').value = '';
            document.getElementById('filter-status').value = '';
            document.getElementById('filter-auto-deduct').value = '';

            applyFilter();
        }

        // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–
        window.onload = function() {
            applyFilter();
        };
    </script>
</body>
</html>